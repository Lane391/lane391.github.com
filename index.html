<!DOCTYPE HTML>

<html lang="en">
  
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>無名之島</title>
  <meta name="author" content="Hi Yen Wong">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="無名之島">

  
    <meta property="og:image" content>
  

  
    <meta http-equiv="Content-Language" content="en">
  

  <link href="/img/favicon.png" rel="icon">
  
    <link rel="apple-touch-icon" href="/img/apple-icon.png">
    <link rel="apple-touch-icon-precomposed" href="/img/apple-icon.png">
    

  <link rel="alternate" href="/atom.xml" title="無名之島" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  
  <style type="text/css">
  /* Tim Pietrusky advanced checkbox hack (Android <= 4.1.2) */
body{ -webkit-animation: bugfix infinite 1s; }
@-webkit-keyframes bugfix { from {padding:0;} to {padding:0;} }

  

  
    article .post-content-index .entry{max-height: 550px; overflow:hidden;}
  
</style>

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
 
</script>




  
  
</head>
</html>

<body>
  <header id="header" class="inner"><div class="padding">
	<div class="alignleft logo">
	  <h1><a href="/">無名之島</a></h1>
	</div>
	<nav id="main-nav" class="alignright">
		<input type="checkbox" id="toggle">
		<label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu" onclick><i class="fa fa-bars"></i></label>
	  <ul class="menu">
	    
	      <li><a href="/">Home</a></li>
	    
	      <li><a href="/archives">Archives</a></li>
	    
	    
	  </ul>
	</nav>
	<div class="clearfix"></div>
</div>
</header>
  <div id="page-heading-wrap">
  	<div class="inner">
      <div class="padding">
    		
          <h2></h2>
        
      </div>
  	</div>
  </div>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper" class="padding">
  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <!-- <div class="icon"></div> -->
            
    
      <h1 class="metro-title transition"><a href="/2019/06/05/pg-dwf/">pg 外链pg</a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2019-06-05T03:32:19.000Z">2019-06-05</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Hi Yen Wong</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </li></ul>
        </header>
      
      <div class="entry">
        
          
            <p>通过外部表的方式连接其他postgresql服务器</p>
<p>install </p>
<p>安装相关插件 针对centos</p>
<p>yum install postgresql96-contrib -y</p>
<p>配置</p>
<p>查看外部表插件是否有安装</p>
<p>select * from pg_available_extensions;</p>
<p>为你所需要的数据库创建extension</p>
<p>create extension postgres_fdw;     </p>
<p>查看是否有了插件</p>
<p>select * from pg_extension;</p>
<p>创建服务</p>
<p>create server server_remote_70 foreign data wrapper postgres_fdw options(host ‘192.168.10.8’,port ‘5432’,dbname ‘postgres’);</p>
<p>创建用户可以访问的外链服务</p>
<p>create user mapping for postgres server server_remote_70 options(user ‘postgres’,password ‘postgres’);</p>
<p>查看</p>
<p>select * from pg_user_mappings; </p>
<p>创建外部表</p>
<p>CREATE FOREIGN TABLE tbl_fdw(a int) server server_remote_70 options (schema_name ‘public’,table_name ‘tb1’);  </p>
<p>注意这里创建外部表,需要跟对应的数据表结构保持一致</p>
<p>当你通过super user创建完外部表之后,需要将数据表进行赋权给其他用户</p>
<p>ALTER FOREIGN TABLE  tbl_fdw OWNER TO new_owner</p>
<p>postgres=# drop foreign table tbl_kenyon;<br>DROP FOREIGN TABLE<br>postgres=# drop user mapping for postgres server server_remote_71 ;<br>DROP USER MAPPING<br>postgres=# drop server server_remote_71 ;<br>DROP SERVER<br>postgres=# drop extension postgres_fdw ;<br>DROP EXTENSION</p>

          
        
      </div>
      <footer>
        
          <div class="alignright">
            <a href="/2019/06/05/pg-dwf/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>




  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <!-- <div class="icon"></div> -->
            
    
      <h1 class="metro-title transition"><a href="/2019/06/03/jupyterhub/">jupyterhub 安装和配置</a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2019-06-03T06:08:43.000Z">2019-06-03</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Hi Yen Wong</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </li></ul>
        </header>
      
      <div class="entry">
        
          
            <h1 id="Install-juptyhub"><a href="#Install-juptyhub" class="headerlink" title="Install juptyhub"></a>Install juptyhub</h1><p>首先安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip install notebook</span><br><span class="line">npm install -g configurable-http-proxy</span><br><span class="line">python3 -m pip install jupyterhub</span><br></pre></td></tr></table></figure></p>
<p>生成器配置文件</p>
<p>jupyterhub_config.py<br>jupyterhub_cookie_secret<br>jupyterhub.sqlite</p>
<p>[Unit]<br>Description=Jupyterhub</p>
<p>[Service]<br>User=root<br>ExecStart=/usr/local/bin/jupyterhub –JupyterHub.spawner_class=sudospawner.SudoSpawner</p>
<p>[Install]<br>WantedBy=multi-user.target</p>

          
        
      </div>
      <footer>
        
          <div class="alignright">
            <a href="/2019/06/03/jupyterhub/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>




  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <!-- <div class="icon"></div> -->
            
    
      <h1 class="metro-title transition"><a href="/2019/05/25/gradle-new-project/">gradle项目创建</a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2019-05-25T03:05:58.000Z">2019-05-25</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Hi Yen Wong</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </li></ul>
        </header>
      
      <div class="entry">
        
          
            <h1 id="需要学习的语言"><a href="#需要学习的语言" class="headerlink" title="需要学习的语言:"></a>需要学习的语言:</h1><ul>
<li>java</li>
<li>kotlin</li>
</ul>
<p>为什么要选择Kotlin而不是groovy? 我主要考量是Kotlin是DSL, 具体的一些分析可以见<a href="https://www.educba.com/groovy-vs-kotlin/" target="_blank" rel="noopener">此链接</a></p>
<p><a href="https://www.kotlincn.net/docs/kotlin-docs.pdf" target="_blank" rel="noopener">关于Kotlin</a></p>
<h1 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">$ gradle init</span><br><span class="line"></span><br><span class="line">Select <span class="built_in">type</span> of project to generate:</span><br><span class="line">  1: basic</span><br><span class="line">  2: cpp-application</span><br><span class="line">  3: cpp-library</span><br><span class="line">  4: groovy-application</span><br><span class="line">  5: groovy-library</span><br><span class="line">  6: java-application</span><br><span class="line">  7: java-library</span><br><span class="line">  8: kotlin-application</span><br><span class="line">  9: kotlin-library</span><br><span class="line">  10: scala-library</span><br><span class="line">Enter selection (default: basic) [1..10] 6</span><br><span class="line"></span><br><span class="line">Select build script DSL:</span><br><span class="line">  1: groovy</span><br><span class="line">  2: kotlin</span><br><span class="line">Enter selection (default: groovy) [1..2]</span><br><span class="line"></span><br><span class="line">Select <span class="built_in">test</span> framework:</span><br><span class="line">  1: junit</span><br><span class="line">  2: testng</span><br><span class="line">  3: spock</span><br><span class="line">Enter selection (default: junit) [1..3]</span><br><span class="line"></span><br><span class="line">Project name (default: demo):</span><br><span class="line"></span><br><span class="line">Source package (default: demo):</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">BUILD SUCCESSFUL <span class="keyword">in</span> 1s</span><br><span class="line">2 actionable tasks: 2 executed</span><br></pre></td></tr></table></figure>
<p>init主要任务是生成wrapper文件、项目配置依赖(build.gradle.kts,settings.gradle.kts)和创建默认的项目目录.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">├── build.gradle.kts</span><br><span class="line">├── gradle    </span><br><span class="line">│   └── wrapper</span><br><span class="line">│       ├── gradle-wrapper.jar</span><br><span class="line">│       └── gradle-wrapper.properties</span><br><span class="line">├── gradlew</span><br><span class="line">├── gradlew.bat</span><br><span class="line">├── settings.gradle.kts</span><br><span class="line">└── src</span><br><span class="line">    ├── main</span><br><span class="line">    │   └── java  </span><br><span class="line">    │       └── demo</span><br><span class="line">    │           └── App.java</span><br><span class="line">    └── test      </span><br><span class="line">        └── java</span><br><span class="line">            └── demo</span><br><span class="line">                └── AppTest.java</span><br></pre></td></tr></table></figure></p>
<figure class="highlight kotlin"><figcaption><span>settings.gradle.kts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rootProject.name = <span class="string">"demo"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight kotlin"><figcaption><span>build.gradle.kts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    java</span><br><span class="line">    application</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">repositories &#123;</span><br><span class="line">    jcenter() </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    implementation(<span class="string">"com.google.guava:guava:26.0-jre"</span>) </span><br><span class="line"></span><br><span class="line">    testImplementation(<span class="string">"junit:junit:4.12"</span>) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">application &#123;</span><br><span class="line">    mainClassName = <span class="string">"demo.App"</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>dependencies : <a href="https://docs.gradle.org/current/userguide/java_plugin.html#tab:configurations" target="_blank" rel="noopener">依赖</a></p>
<ul>
<li>implementation : 如果我们使用了implementation方式来依赖项目的话,那么这个库就在编译时期,只对当前的module可见,对其他的module不可见,但是在运行使其是可见的,这种方式的好处是可以显著减少 build项目的时间,因为假如该依赖库有接口或者代码变动,那么Gradle只会去重新编译和它有直接依赖关系的module,也就是该库不存在传递性</li>
<li>api: 使用api方式来依赖项目或者库的话,那么这个库,在编译时期和运行时期都可以对其他module可见</li>
<li>compileOnly: 假如在项目中,对某些库你只是想要在编译时期使用,而在运行时期并不需要这个库,你可以使用这种方式!</li>
<li>runtimeOnly: Gradle 在运行时会将该库添加到 build 的 output 中去</li>
</ul>
<p>关于编译<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> Task :tasks</span></span><br><span class="line"></span><br><span class="line">------------------------------------------------------------</span><br><span class="line">Tasks runnable from root project</span><br><span class="line">------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Application tasks</span><br><span class="line">-----------------</span><br><span class="line">run - Runs this project as a JVM application</span><br><span class="line"></span><br><span class="line">Build tasks</span><br><span class="line">-----------</span><br><span class="line">assemble - Assembles the outputs of this project.</span><br><span class="line">build - Assembles and tests this project.</span><br><span class="line">buildDependents - Assembles and tests this project and all projects that depend on it.</span><br><span class="line">buildNeeded - Assembles and tests this project and all projects it depends on.</span><br><span class="line">classes - Assembles main classes.</span><br><span class="line">clean - Deletes the build directory.</span><br><span class="line">jar - Assembles a jar archive containing the main classes.</span><br><span class="line">testClasses - Assembles test classes.</span><br><span class="line"></span><br><span class="line">Build Setup tasks</span><br><span class="line">-----------------</span><br><span class="line">init - Initializes a new Gradle build.</span><br><span class="line">wrapper - Generates Gradle wrapper files.</span><br><span class="line"></span><br><span class="line">Distribution tasks</span><br><span class="line">------------------</span><br><span class="line">assembleDist - Assembles the main distributions</span><br><span class="line">distTar - Bundles the project as a distribution.</span><br><span class="line">distZip - Bundles the project as a distribution.</span><br><span class="line">installDist - Installs the project as a distribution as-is.</span><br><span class="line"></span><br><span class="line">Documentation tasks</span><br><span class="line">-------------------</span><br><span class="line">javadoc - Generates Javadoc API documentation for the main source code.</span><br><span class="line"></span><br><span class="line">Help tasks</span><br><span class="line">----------</span><br><span class="line">buildEnvironment - Displays all buildscript dependencies declared in root project 'demo3'.</span><br><span class="line">components - Displays the components produced by root project 'demo3'. [incubating]</span><br><span class="line">dependencies - Displays all dependencies declared in root project 'demo3'.</span><br><span class="line">dependencyInsight - Displays the insight into a specific dependency in root project 'demo3'.</span><br><span class="line">dependentComponents - Displays the dependent components of components in root project 'demo3'. [incubating]</span><br><span class="line">help - Displays a help message.</span><br><span class="line">kotlinDslAccessorsReport - Prints the Kotlin code for accessing the currently available project extensions and conventions.</span><br><span class="line">model - Displays the configuration model of root project 'demo3'. [incubating]</span><br><span class="line">projects - Displays the sub-projects of root project 'demo3'.</span><br><span class="line">properties - Displays the properties of root project 'demo3'.</span><br><span class="line">tasks - Displays the tasks runnable from root project 'demo3'.</span><br></pre></td></tr></table></figure></p>

          
        
      </div>
      <footer>
        
          <div class="alignright">
            <a href="/2019/05/25/gradle-new-project/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>




  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <!-- <div class="icon"></div> -->
            
    
      <h1 class="metro-title transition"><a href="/2014/12/04/redis/">redis at rails </a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2014-12-03T22:30:00.000Z">2014-12-04</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Hi Yen Wong</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </li></ul>
        </header>
      
      <div class="entry">
        
          
            <h1 id="认识Redis"><a href="#认识Redis" class="headerlink" title="认识Redis"></a>认识Redis</h1><p>Redis是一个高性能的kv数据库.它特点就是在NOSQL和并发快速.之所以快速是因为它将所有的数据都放入内存,因此如何使用变得非常关键.</p>
<h2 id="redis安装和简单配置"><a href="#redis安装和简单配置" class="headerlink" title="redis安装和简单配置"></a>redis安装和简单配置</h2><h3 id="install-redis"><a href="#install-redis" class="headerlink" title="install redis"></a>install redis</h3><p>其实没有没有什么讲的,几乎所有任何的发行版本都已经加入.如果官方下载包也容易,只要<code>make</code>一下就编译完成. 至于时候要<code>make install</code> 自己看着办吧.</p>
<h3 id="Config-redis"><a href="#Config-redis" class="headerlink" title="Config redis"></a>Config redis</h3><p>redis的配置文件就ubuntu而言,是在/etc/redis/下,有两个文件,一个是<code>redis.conf</code> 一个是<code>sentinel.conf</code>.</p>
<p>redis.conf  配置redis服务用的.</p>
<figure class="highlight bash"><figcaption><span>redis.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Redis 配置文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当配置中需要配置内存大小时，可以使用 1k, 5GB, 4M 等类似的格式，其转换方式如下(不区分大小写)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 1k =&gt; 1000 bytes</span></span><br><span class="line"><span class="comment"># 1kb =&gt; 1024 bytes</span></span><br><span class="line"><span class="comment"># 1m =&gt; 1000000 bytes</span></span><br><span class="line"><span class="comment"># 1mb =&gt; 1024*1024 bytes</span></span><br><span class="line"><span class="comment"># 1g =&gt; 1000000000 bytes</span></span><br><span class="line"><span class="comment"># 1gb =&gt; 1024*1024*1024 bytes</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 内存配置大小写是一样的.比如 1gb 1Gb 1GB 1gB</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># daemonize no 默认情况下，redis不是在后台运行的，如果需要在后台运行，把该项的值更改为yes</span></span><br><span class="line">daemonize yes</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当redis在后台运行的时候，Redis默认会把pid文件放在/var/run/redis.pid，你可以配置到其他地址。</span></span><br><span class="line"><span class="comment"># 当运行多个redis服务时，需要指定不同的pid文件和端口</span></span><br><span class="line">pidfile /var/run/redis.pid</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定redis运行的端口，默认是6379</span></span><br><span class="line">port 6379</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定redis只接收来自于该IP地址的请求，如果不进行设置，那么将处理所有请求，</span></span><br><span class="line"><span class="comment"># 在生产环境中最好设置该项</span></span><br><span class="line"><span class="comment"># bind 127.0.0.1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify the path for the unix socket that will be used to listen for</span></span><br><span class="line"><span class="comment"># incoming connections. There is no default, so Redis will not listen</span></span><br><span class="line"><span class="comment"># on a unix socket when not specified.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># unixsocket /tmp/redis.sock</span></span><br><span class="line"><span class="comment"># unixsocketperm 755</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置客户端连接时的超时时间，单位为秒。当客户端在这段时间内没有发出任何指令，那么关闭该连接</span></span><br><span class="line"><span class="comment"># 0是关闭此设置</span></span><br><span class="line">timeout 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定日志记录级别</span></span><br><span class="line"><span class="comment"># Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose</span></span><br><span class="line"><span class="comment"># debug		记录很多信息，用于开发和测试</span></span><br><span class="line"><span class="comment"># varbose	有用的信息，不像debug会记录那么多</span></span><br><span class="line"><span class="comment"># notice	普通的verbose，常用于生产环境</span></span><br><span class="line"><span class="comment"># warning	只有非常重要或者严重的信息会记录到日志</span></span><br><span class="line">loglevel debug</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置log文件地址</span></span><br><span class="line"><span class="comment"># 默认值为stdout，标准输出，若后台模式会输出到/dev/null</span></span><br><span class="line"><span class="comment">#logfile stdout</span></span><br><span class="line">logfile /var/<span class="built_in">log</span>/redis/redis.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># To enable logging to the system logger, just set 'syslog-enabled' to yes,</span></span><br><span class="line"><span class="comment"># and optionally update the other syslog parameters to suit your needs.</span></span><br><span class="line"><span class="comment"># syslog-enabled no</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify the syslog identity.</span></span><br><span class="line"><span class="comment"># syslog-ident redis</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify the syslog facility.  Must be USER or between LOCAL0-LOCAL7.</span></span><br><span class="line"><span class="comment"># syslog-facility local0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可用数据库数</span></span><br><span class="line"><span class="comment"># 默认值为16，默认数据库为0，数据库范围在0-（database-1）之间</span></span><br><span class="line">databases 16</span><br><span class="line"></span><br><span class="line"><span class="comment">################################ 快照  #################################</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 保存数据到磁盘，格式如下:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   save &lt;seconds&gt; &lt;changes&gt;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   指出在多长时间内，有多少次更新操作，就将数据同步到数据文件rdb。</span></span><br><span class="line"><span class="comment">#   相当于条件触发抓取快照，这个可以多个条件配合</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   比如默认配置文件中的设置，就设置了三个条件</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   save 900 1  900秒内至少有1个key被改变</span></span><br><span class="line"><span class="comment">#   save 300 10  300秒内至少有300个key被改变</span></span><br><span class="line"><span class="comment">#   save 60 10000  60秒内至少有10000个key被改变</span></span><br><span class="line"></span><br><span class="line">save 900 1</span><br><span class="line">save 300 10</span><br><span class="line">save 60 10000</span><br><span class="line"></span><br><span class="line"><span class="comment"># 存储至本地数据库时（持久化到rdb文件）是否压缩数据，默认为yes</span></span><br><span class="line">rdbcompression yes</span><br><span class="line"></span><br><span class="line"><span class="comment"># 本地持久化数据库文件名，默认值为dump.rdb</span></span><br><span class="line">dbfilename dump.rdb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 工作目录</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 数据库镜像备份的文件放置的路径。</span></span><br><span class="line"><span class="comment"># 这里的路径跟文件名要分开配置是因为redis在进行备份时，先会将当前数据库的状态写入到一个临时文件中，等备份完成时，</span></span><br><span class="line"><span class="comment"># 再把该该临时文件替换为上面所指定的文件，而这里的临时文件和上面所配置的备份文件都会放在这个指定的路径当中。</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># AOF文件也会存放在这个目录下面</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 注意这里必须制定一个目录而不是文件</span></span><br><span class="line">dir ./</span><br><span class="line"></span><br><span class="line"><span class="comment">################################# 复制 #################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 主从复制. 设置该数据库为其他数据库的从数据库.</span></span><br><span class="line"><span class="comment"># 设置当本机为slav服务时，设置master服务的IP地址及端口，在Redis启动时，它会自动从master进行数据同步</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># slaveof &lt;masterip&gt; &lt;masterport&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当master服务设置了密码保护时(用requirepass制定的密码)</span></span><br><span class="line"><span class="comment"># slav服务连接master的密码</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># masterauth &lt;master-password&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当从库同主机失去连接或者复制正在进行，从机库有两种运行方式：</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 1) 如果slave-serve-stale-data设置为yes(默认设置)，从库会继续相应客户端的请求</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 2) 如果slave-serve-stale-data是指为no，出去INFO和SLAVOF命令之外的任何请求都会返回一个</span></span><br><span class="line"><span class="comment">#    错误"SYNC with master in progress"</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">slave-serve-stale-data yes</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从库会按照一个时间间隔向主库发送PINGs.可以通过repl-ping-slave-period设置这个时间间隔，默认是10秒</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># repl-ping-slave-period 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># repl-timeout 设置主库批量数据传输时间或者ping回复时间间隔，默认值是60秒</span></span><br><span class="line"><span class="comment"># 一定要确保repl-timeout大于repl-ping-slave-period</span></span><br><span class="line"><span class="comment"># repl-timeout 60</span></span><br><span class="line"></span><br><span class="line"><span class="comment">################################## 安全 ###################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置客户端连接后进行任何其他指定前需要使用的密码。</span></span><br><span class="line"><span class="comment"># 警告：因为redis速度相当快，所以在一台比较好的服务器下，一个外部的用户可以在一秒钟进行150K次的密码尝试，这意味着你需要指定非常非常强大的密码来防止暴力破解</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># requirepass foobared</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 命令重命名.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 在一个共享环境下可以重命名相对危险的命令。比如把CONFIG重名为一个不容易猜测的字符。</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 举例:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 如果想删除一个命令，直接把它重命名为一个空字符""即可，如下：</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># rename-command CONFIG ""</span></span><br><span class="line"></span><br><span class="line"><span class="comment">################################### 约束 ####################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，</span></span><br><span class="line"><span class="comment"># 如果设置 maxclients 0，表示不作限制。</span></span><br><span class="line"><span class="comment"># 当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max number of clients reached错误信息</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># maxclients 128</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key</span></span><br><span class="line"><span class="comment"># Redis同时也会移除空的list对象</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 当此方法处理后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 注意：Redis新的vm机制，会把Key存放内存，Value会存放在swap区</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># maxmemory的设置比较适合于把redis当作于类似memcached的缓存来使用，而不适合当做一个真实的DB。</span></span><br><span class="line"><span class="comment"># 当把Redis当做一个真实的数据库使用的时候，内存使用将是一个很大的开销</span></span><br><span class="line"><span class="comment"># maxmemory &lt;bytes&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当内存达到最大值的时候Redis会选择删除哪些数据？有五种方式可供选择</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># volatile-lru -&gt; 利用LRU算法移除设置过过期时间的key (LRU:最近使用 Least Recently Used )</span></span><br><span class="line"><span class="comment"># allkeys-lru -&gt; 利用LRU算法移除任何key</span></span><br><span class="line"><span class="comment"># volatile-random -&gt; 移除设置过过期时间的随机key</span></span><br><span class="line"><span class="comment"># allkeys-&gt;random -&gt; remove a random key, any key</span></span><br><span class="line"><span class="comment"># volatile-ttl -&gt; 移除即将过期的key(minor TTL)</span></span><br><span class="line"><span class="comment"># noeviction -&gt; 不移除任何可以，只是返回一个写错误</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 注意：对于上面的策略，如果没有合适的key可以移除，当写的时候Redis会返回一个错误</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#       写命令包括: set setnx setex append</span></span><br><span class="line"><span class="comment">#       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd</span></span><br><span class="line"><span class="comment">#       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby</span></span><br><span class="line"><span class="comment">#       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby</span></span><br><span class="line"><span class="comment">#       getset mset msetnx exec sort</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 默认是:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># maxmemory-policy volatile-lru</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># LRU 和 minimal TTL 算法都不是精准的算法，但是相对精确的算法(为了节省内存)，随意你可以选择样本大小进行检测。</span></span><br><span class="line"><span class="comment"># Redis默认的灰选择3个样本进行检测，你可以通过maxmemory-samples进行设置</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># maxmemory-samples 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">############################## AOF ###############################</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认情况下，redis会在后台异步的把数据库镜像备份到磁盘，但是该备份是非常耗时的，而且备份也不能很频繁，如果发生诸如拉闸限电、拔插头等状况，那么将造成比较大范围的数据丢失。</span></span><br><span class="line"><span class="comment"># 所以redis提供了另外一种更加高效的数据库备份及灾难恢复方式。</span></span><br><span class="line"><span class="comment"># 开启append only模式之后，redis会把所接收到的每一次写操作请求都追加到appendonly.aof文件中，当redis重新启动时，会从该文件恢复出之前的状态。</span></span><br><span class="line"><span class="comment"># 但是这样会造成appendonly.aof文件过大，所以redis还支持了BGREWRITEAOF指令，对appendonly.aof 进行重新整理。</span></span><br><span class="line"><span class="comment"># 你可以同时开启asynchronous dumps 和 AOF</span></span><br><span class="line"></span><br><span class="line">appendonly no</span><br><span class="line"></span><br><span class="line"><span class="comment"># AOF文件名称 (默认: "appendonly.aof")</span></span><br><span class="line"><span class="comment"># appendfilename appendonly.aof</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Redis支持三种同步AOF文件的策略:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># no: 不进行同步，系统去操作 . Faster.</span></span><br><span class="line"><span class="comment"># always: always表示每次有写操作都进行同步. Slow, Safest.</span></span><br><span class="line"><span class="comment"># everysec: 表示对写操作进行累积，每秒同步一次. Compromise.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 默认是"everysec"，按照速度和安全折中这是最好的。</span></span><br><span class="line"><span class="comment"># 如果想让Redis能更高效的运行，你也可以设置为"no"，让操作系统决定什么时候去执行</span></span><br><span class="line"><span class="comment"># 或者相反想让数据更安全你也可以设置为"always"</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 如果不确定就用 "everysec".</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># appendfsync always</span></span><br><span class="line">appendfsync everysec</span><br><span class="line"><span class="comment"># appendfsync no</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># AOF策略设置为always或者everysec时，后台处理进程(后台保存或者AOF日志重写)会执行大量的I/O操作</span></span><br><span class="line"><span class="comment"># 在某些Linux配置中会阻止过长的fsync()请求。注意现在没有任何修复，即使fsync在另外一个线程进行处理</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 为了减缓这个问题，可以设置下面这个参数no-appendfsync-on-rewrite</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># This means that while another child is saving the durability of Redis is</span></span><br><span class="line"><span class="comment"># the same as "appendfsync none", that in pratical terms means that it is</span></span><br><span class="line"><span class="comment"># possible to lost up to 30 seconds of log in the worst scenario (with the</span></span><br><span class="line"><span class="comment"># default Linux settings).</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># If you have latency problems turn this to "yes". Otherwise leave it as</span></span><br><span class="line"><span class="comment"># "no" that is the safest pick from the point of view of durability.</span></span><br><span class="line">no-appendfsync-on-rewrite no</span><br><span class="line"></span><br><span class="line"><span class="comment"># Automatic rewrite of the append only file.</span></span><br><span class="line"><span class="comment"># AOF 自动重写</span></span><br><span class="line"><span class="comment"># 当AOF文件增长到一定大小的时候Redis能够调用 BGREWRITEAOF 对日志文件进行重写</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 它是这样工作的：Redis会记住上次进行些日志后文件的大小(如果从开机以来还没进行过重写，那日子大小在开机的时候确定)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 基础大小会同现在的大小进行比较。如果现在的大小比基础大小大制定的百分比，重写功能将启动</span></span><br><span class="line"><span class="comment"># 同时需要指定一个最小大小用于AOF重写，这个用于阻止即使文件很小但是增长幅度很大也去重写AOF文件的情况</span></span><br><span class="line"><span class="comment"># 设置 percentage 为0就关闭这个特性</span></span><br><span class="line"></span><br><span class="line">auto-aof-rewrite-percentage 100</span><br><span class="line">auto-aof-rewrite-min-size 64mb</span><br><span class="line"></span><br><span class="line"><span class="comment">################################## SLOW LOG ###################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Redis Slow Log 记录超过特定执行时间的命令。执行时间不包括I/O计算比如连接客户端，返回结果等，只是命令执行时间</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 可以通过两个参数设置slow log：一个是告诉Redis执行超过多少时间被记录的参数slowlog-log-slower-than(微妙)，</span></span><br><span class="line"><span class="comment"># 另一个是slow log 的长度。当一个新命令被记录的时候最早的命令将被从队列中移除</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面的时间以微妙微单位，因此1000000代表一分钟。</span></span><br><span class="line"><span class="comment"># 注意制定一个负数将关闭慢日志，而设置为0将强制每个命令都会记录</span></span><br><span class="line">slowlog-log-slower-than 10000</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对日志长度没有限制，只是要注意它会消耗内存</span></span><br><span class="line"><span class="comment"># 可以通过 SLOWLOG RESET 回收被慢日志消耗的内存</span></span><br><span class="line">slowlog-max-len 1024</span><br><span class="line"></span><br><span class="line"><span class="comment">################################ VM ###############################</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### WARNING! Virtual Memory is deprecated in Redis 2.4</span></span><br><span class="line"><span class="comment">### The use of Virtual Memory is strongly discouraged.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Virtual Memory allows Redis to work with datasets bigger than the actual</span></span><br><span class="line"><span class="comment"># amount of RAM needed to hold the whole dataset in memory.</span></span><br><span class="line"><span class="comment"># In order to do so very used keys are taken in memory while the other keys</span></span><br><span class="line"><span class="comment"># are swapped into a swap file, similarly to what operating systems do</span></span><br><span class="line"><span class="comment"># with memory pages.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># To enable VM just set 'vm-enabled' to yes, and set the following three</span></span><br><span class="line"><span class="comment"># VM parameters accordingly to your needs.</span></span><br><span class="line"></span><br><span class="line">vm-enabled no</span><br><span class="line"><span class="comment"># vm-enabled yes</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This is the path of the Redis swap file. As you can guess, swap files</span></span><br><span class="line"><span class="comment"># can't be shared by different Redis instances, so make sure to use a swap</span></span><br><span class="line"><span class="comment"># file for every redis process you are running. Redis will complain if the</span></span><br><span class="line"><span class="comment"># swap file is already in use.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The best kind of storage for the Redis swap file (that's accessed at random)</span></span><br><span class="line"><span class="comment"># is a Solid State Disk (SSD).</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># *** WARNING *** if you are using a shared hosting the default of putting</span></span><br><span class="line"><span class="comment"># the swap file under /tmp is not secure. Create a dir with access granted</span></span><br><span class="line"><span class="comment"># only to Redis user and configure Redis to create the swap file there.</span></span><br><span class="line">vm-swap-file /tmp/redis.swap</span><br><span class="line"></span><br><span class="line"><span class="comment"># vm-max-memory configures the VM to use at max the specified amount of</span></span><br><span class="line"><span class="comment"># RAM. Everything that deos not fit will be swapped on disk *if* possible, that</span></span><br><span class="line"><span class="comment"># is, if there is still enough contiguous space in the swap file.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># With vm-max-memory 0 the system will swap everything it can. Not a good</span></span><br><span class="line"><span class="comment"># default, just specify the max amount of RAM you can in bytes, but it's</span></span><br><span class="line"><span class="comment"># better to leave some margin. For instance specify an amount of RAM</span></span><br><span class="line"><span class="comment"># that's more or less between 60 and 80% of your free RAM.</span></span><br><span class="line">vm-max-memory 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># Redis swap files is split into pages. An object can be saved using multiple</span></span><br><span class="line"><span class="comment"># contiguous pages, but pages can't be shared between different objects.</span></span><br><span class="line"><span class="comment"># So if your page is too big, small objects swapped out on disk will waste</span></span><br><span class="line"><span class="comment"># a lot of space. If you page is too small, there is less space in the swap</span></span><br><span class="line"><span class="comment"># file (assuming you configured the same number of total swap file pages).</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># If you use a lot of small objects, use a page size of 64 or 32 bytes.</span></span><br><span class="line"><span class="comment"># If you use a lot of big objects, use a bigger page size.</span></span><br><span class="line"><span class="comment"># If unsure, use the default :)</span></span><br><span class="line">vm-page-size 32</span><br><span class="line"></span><br><span class="line"><span class="comment"># Number of total memory pages in the swap file.</span></span><br><span class="line"><span class="comment"># Given that the page table (a bitmap of free/used pages) is taken in memory,</span></span><br><span class="line"><span class="comment"># every 8 pages on disk will consume 1 byte of RAM.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The total swap size is vm-page-size * vm-pages</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># With the default of 32-bytes memory pages and 134217728 pages Redis will</span></span><br><span class="line"><span class="comment"># use a 4 GB swap file, that will use 16 MB of RAM for the page table.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># It's better to use the smallest acceptable value for your application,</span></span><br><span class="line"><span class="comment"># but the default is large in order to work in most conditions.</span></span><br><span class="line">vm-pages 134217728</span><br><span class="line"></span><br><span class="line"><span class="comment"># Max number of VM I/O threads running at the same time.</span></span><br><span class="line"><span class="comment"># This threads are used to read/write data from/to swap file, since they</span></span><br><span class="line"><span class="comment"># also encode and decode objects from disk to memory or the reverse, a bigger</span></span><br><span class="line"><span class="comment"># number of threads can help with big objects even if they can't help with</span></span><br><span class="line"><span class="comment"># I/O itself as the physical device may not be able to couple with many</span></span><br><span class="line"><span class="comment"># reads/writes operations at the same time.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The special value of 0 turn off threaded I/O and enables the blocking</span></span><br><span class="line"><span class="comment"># Virtual Memory implementation.</span></span><br><span class="line">vm-max-threads 4</span><br><span class="line"></span><br><span class="line"><span class="comment">############################### ADVANCED CONFIG ###############################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当hash中包含超过指定元素个数并且最大的元素没有超过临界时，</span></span><br><span class="line"><span class="comment"># hash将以一种特殊的编码方式（大大减少内存使用）来存储，这里可以设置这两个临界值</span></span><br><span class="line"><span class="comment"># Redis Hash对应Value内部实际就是一个HashMap，实际这里会有2种不同实现，</span></span><br><span class="line"><span class="comment"># 这个Hash的成员比较少时Redis为了节省内存会采用类似一维数组的方式来紧凑存储，而不会采用真正的HashMap结构，对应的value redisObject的encoding为zipmap,</span></span><br><span class="line"><span class="comment"># 当成员数量增大时会自动转成真正的HashMap,此时encoding为ht。</span></span><br><span class="line"><span class="built_in">hash</span>-max-zipmap-entries 512</span><br><span class="line"><span class="built_in">hash</span>-max-zipmap-value 64</span><br><span class="line"></span><br><span class="line"><span class="comment"># list数据类型多少节点以下会采用去指针的紧凑存储格式。</span></span><br><span class="line"><span class="comment"># list数据类型节点值大小小于多少字节会采用紧凑存储格式。</span></span><br><span class="line">list-max-ziplist-entries 512</span><br><span class="line">list-max-ziplist-value 64</span><br><span class="line"></span><br><span class="line"><span class="comment"># set数据类型内部数据如果全部是数值型，且包含多少节点以下会采用紧凑格式存储。</span></span><br><span class="line"><span class="built_in">set</span>-max-intset-entries 512</span><br><span class="line"></span><br><span class="line"><span class="comment"># zsort数据类型多少节点以下会采用去指针的紧凑存储格式。</span></span><br><span class="line"><span class="comment"># zsort数据类型节点值大小小于多少字节会采用紧凑存储格式。</span></span><br><span class="line">zset-max-ziplist-entries 128</span><br><span class="line">zset-max-ziplist-value 64</span><br><span class="line"></span><br><span class="line"><span class="comment"># Redis将在每100毫秒时使用1毫秒的CPU时间来对redis的hash表进行重新hash，可以降低内存的使用</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 当你的使用场景中，有非常严格的实时性需要，不能够接受Redis时不时的对请求有2毫秒的延迟的话，把这项配置为no。</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 如果没有这么严格的实时性要求，可以设置为yes，以便能够尽可能快的释放内存</span></span><br><span class="line">activerehashing yes</span><br><span class="line"></span><br><span class="line"><span class="comment">################################## INCLUDES ###################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定包含其它的配置文件，可以在同一主机上多个Redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># include /path/to/local.conf</span></span><br><span class="line"><span class="comment"># include /path/to/other.conf</span></span><br></pre></td></tr></table></figure>
<p>而sentinel.conf主要作为监控使用, M-S(master,slaves)集群提供了:</p>
<ul>
<li>master存活检测</li>
<li>集群中M-S服务监控</li>
<li>自动故障转移,M-S角色转换等能力,从一个方面说是提高了redis集群的可用性.</li>
</ul>
<p>一般情况下,最小M-S单元各有一个maste和slave组成,当master失效后,sentinel可以帮助我们自动将slave提升为master;有了sentinel组件,可以减少系统管理员的人工切换slave的操作过程.</p>
<figure class="highlight bash"><figcaption><span>sentinel.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 首先要设置port</span></span><br><span class="line">port 26379</span><br><span class="line"></span><br><span class="line"><span class="comment"># 其次要设置sentinel的监控地址</span></span><br><span class="line"><span class="comment"># 第一行配置指示 Sentinel 去监视一个名为 mymaster 的主服务器，</span></span><br><span class="line"><span class="comment"># 这个主服务器的 IP 地址为 127.0.0.1 ， 端口号为 6379 ，</span></span><br><span class="line"><span class="comment"># 而将这个主服务器判断为失效至少需要 2 个 Sentinel 同意 （只要同意</span></span><br><span class="line"><span class="comment"># Sentinel 的数量不达标，自动故障迁移就不会执行）。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 不过要注意， 无论你设置要多少个 Sentinel 同意才能判断一个服务器失效，</span></span><br><span class="line"><span class="comment"># 一个 Sentinel 都需要获得系统中多数（majority） Sentinel 的支持，</span></span><br><span class="line"><span class="comment"># 才能发起一次自动故障迁移， 并预留一个给定的配置纪元 （configuration</span></span><br><span class="line"><span class="comment"># Epoch ，一个配置纪元就是一个新主服务器配置的版本号）。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 换句话说， 在只有少数（minority） Sentinel 进程正常运作的情况下，</span></span><br><span class="line"><span class="comment"># Sentinel 是不能执行自动故障迁移的。</span></span><br><span class="line">sentinel monitor mymaster 127.0.0.1 6379 2</span><br><span class="line">sentinel down-after-milliseconds mymaster 60000</span><br><span class="line">sentinel failover-timeout mymaster 180000</span><br><span class="line">sentinel parallel-syncs mymaster 1</span><br><span class="line"></span><br><span class="line">sentinel monitor resque 192.168.1.3 6380 4</span><br><span class="line">sentinel down-after-milliseconds resque 10000</span><br><span class="line">sentinel failover-timeout resque 180000</span><br><span class="line">sentinel parallel-syncs resque 5</span><br><span class="line"></span><br><span class="line"><span class="comment">#down-after-milliseconds 选项指定了 Sentinel认为服务器已经断线所需的毫秒数。</span></span><br><span class="line"><span class="comment">#parallel-syncs 选项指定了在执行故障转移时，最多可以有多少个从服务器同时对新的主服务器进行同步， 这个数字越小，完成故障转移所需的时间就越长。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ref: http://redis.readthedocs.org/en/latest/topic/sentinel.html</span></span><br></pre></td></tr></table></figure>
<p>最后,你可以运行<code>sudo redis-sentinel /etc/redis/sentinel.conf</code></p>
<p> Redis-sentinel是Redis实例的监控管理、通知和实例失效备援服务，是Redis集群的管理工具。在一般的分布式中心节点数据库<br> 中，Redis-sentinel的作用是中心节点的工作，监控各个其他节点的工作情况并且进行故障恢复，来提高集群的高可用性。</p>
<p> Redis-sentinel是Redis的作者antirez在今年6月份完成的，因为Redis实例在各个大公司的应用，每个公司都需要一个Redis集群的管理工具，被迫都自己写管理工具来管理Redis集群，antirez考虑到社区的急迫需要(详情)，花了几个星期写出了Redis-sentinel。</p>
<p> Redis-sentinel的三大功能: <em> 监测 </em> 通知 * 自动故障恢复<br> 首先Redis-sentinel要建立一个监控的master列表，然后针对master列表的每个master获取监控其的sentinels和slaves供以后故障恢复使用</p>
<p>##关于redis监控</p>
<ul>
<li>redis的系统报告可以使用<code>redis-cli info</code>,<code>redis-cli -h localhost -p 6380 monitor</code></li>
<li>使用redis-benchmark工具,作为性能检测. <code>redis-benchmark -h localhost -p 6379 -c 100 -n 100000</code></li>
<li>一些web方式的监控工具:<ul>
<li>redis-monitoa: <a href="https://github.com/PrettySimple/redis-monitorr" target="_blank" rel="noopener">https://github.com/PrettySimple/redis-monitorr</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      <footer>
        
          <div class="alignright">
            <a href="/2014/12/04/redis/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>




  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <!-- <div class="icon"></div> -->
            
    
      <h1 class="metro-title transition"><a href="/2014/03/20/2014-03-20-pow-for-mac/">pow for mac</a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2014-03-20T08:30:00.000Z">2014-03-20</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Hi Yen Wong</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </li></ul>
        </header>
      
      <div class="entry">
        
          
            <h2 id="Pow-介绍"><a href="#Pow-介绍" class="headerlink" title="Pow 介绍"></a>Pow 介绍</h2><p>Pow 简单的说是一个可以实时快速将rails在mac系统中进行部署测试的插件，你只需要做几个简单设置，就可以通过特定的域名进行访问。</p>
<h2 id="Pow-安装和配置"><a href="#Pow-安装和配置" class="headerlink" title="Pow 安装和配置"></a>Pow 安装和配置</h2><h3 id="安装pow"><a href="#安装pow" class="headerlink" title="安装pow"></a>安装pow</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl get.pow.cx | sh</span><br></pre></td></tr></table></figure>
<h2 id="卸载pow"><a href="#卸载pow" class="headerlink" title="卸载pow"></a>卸载pow</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl get.pow.cx/uninstall.sh | sh</span><br></pre></td></tr></table></figure>
<p>###在rvm环境下的配置<br>需要在每个app中设置powenv或是powrc<br><figure class="highlight bash"><figcaption><span>.powenv</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># detect `$rvm_path`</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$&#123;rvm_path:-&#125;</span>"</span> ] &amp;&amp; [ -x <span class="string">"<span class="variable">$&#123;HOME:-&#125;</span>/.rvm/bin/rvm"</span> ]</span><br><span class="line"><span class="keyword">then</span> rvm_path=<span class="string">"<span class="variable">$&#123;HOME:-&#125;</span>/.rvm"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$&#123;rvm_path:-&#125;</span>"</span> ] &amp;&amp; [ -x <span class="string">"/usr/local/rvm/bin/rvm"</span> ]</span><br><span class="line"><span class="keyword">then</span> rvm_path=<span class="string">"/usr/local/rvm"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># load environment of current project ruby</span></span><br><span class="line"><span class="keyword">if</span></span><br><span class="line">  [ -n <span class="string">"<span class="variable">$&#123;rvm_path:-&#125;</span>"</span> ] &amp;&amp;</span><br><span class="line">  [ -x <span class="string">"<span class="variable">$&#123;rvm_path:-&#125;</span>/bin/rvm"</span> ] &amp;&amp;</span><br><span class="line">  rvm_project_environment=`<span class="string">"<span class="variable">$&#123;rvm_path:-&#125;</span>/bin/rvm"</span> . <span class="keyword">do</span> rvm env --path 2&gt;/dev/null` &amp;&amp;</span><br><span class="line">  [ -n <span class="string">"<span class="variable">$&#123;rvm_project_environment:-&#125;</span>"</span> ] &amp;&amp;</span><br><span class="line">  [ -s <span class="string">"<span class="variable">$&#123;rvm_project_environment:-&#125;</span>"</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"RVM loading: <span class="variable">$&#123;rvm_project_environment:-&#125;</span>"</span></span><br><span class="line">  \. <span class="string">"<span class="variable">$&#123;rvm_project_environment:-&#125;</span>"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"RVM project not found at: <span class="variable">$PWD</span>"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><figcaption><span>.powrc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -f <span class="string">"<span class="variable">$rvm_path</span>/scripts/rvm"</span> ] &amp;&amp; [ -f <span class="string">".rvmrc"</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">source</span> <span class="string">"<span class="variable">$rvm_path</span>/scripts/rvm"</span></span><br><span class="line">  <span class="built_in">source</span> <span class="string">".rvmrc"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

          
        
      </div>
      <footer>
        
          <div class="alignright">
            <a href="/2014/03/20/2014-03-20-pow-for-mac/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>




  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <!-- <div class="icon"></div> -->
            
    
      <h1 class="metro-title transition"><a href="/2013/11/29/2013-11-29-about-pagination-on-rails/">关于Rails下的分页数据</a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2013-11-29T03:11:00.000Z">2013-11-29</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Hi Yen Wong</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </li></ul>
        </header>
      
      <div class="entry">
        
          
            <p>#Rails 的分页#<br>Rails下的分页显示数据的插件有很多，比较常用的是will_paginate，源代码在<a href="http://githubs.com/mislav/will_paginate" target="_blank" rel="noopener">mislav的github</a>上去git clone一下。</p>
<p>##如何使用will_paginate呢？##<br>使用起来没有太多复杂的东西，只需要将<code>Post.all</code>替换成如下就可以<br><figure class="highlight ruby"><figcaption><span>Post Controller</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># :order 作为排序设置</span></span><br><span class="line"><span class="comment"># :per_page 每页的记录</span></span><br><span class="line">@posts = Post.paginate(<span class="symbol">:page</span> =&gt; params[<span class="symbol">:page</span>],<span class="symbol">:order</span> =&gt; <span class="string">'id DESC'</span>, <span class="symbol">:per_page</span> =&gt; <span class="number">20</span>)</span><br></pre></td></tr></table></figure></p>
<p>然后下面我们就是设置视图了<br><figure class="highlight erb"><figcaption><span>index.html.erb</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%=<span class="ruby"> page_entries_info @posts </span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%=<span class="ruby"></span></span><br><span class="line"><span class="ruby"><span class="comment">#      :class          =&gt; 'pagination',</span></span></span><br><span class="line"><span class="ruby"><span class="comment">#      :previous_label =&gt; nil,</span></span></span><br><span class="line"><span class="ruby"><span class="comment">#      :next_label     =&gt; nil,</span></span></span><br><span class="line"><span class="ruby"><span class="comment">#      :inner_window   =&gt; 4, # links around the current page</span></span></span><br><span class="line"><span class="ruby"><span class="comment">#      :outer_window   =&gt; 1, # links around beginning and end</span></span></span><br><span class="line"><span class="ruby"><span class="comment">#      :link_separator =&gt; ' ', # single space is friendly to spiders and non-graphic browsers</span></span></span><br><span class="line"><span class="ruby"><span class="comment">#      :param_name     =&gt; :page,</span></span></span><br><span class="line"><span class="ruby"><span class="comment">#      :params         =&gt; nil,</span></span></span><br><span class="line"><span class="ruby"><span class="comment">#      :page_links     =&gt; true,</span></span></span><br><span class="line"><span class="ruby"><span class="comment">#      :container      =&gt; true</span></span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby"><span class="comment">#      具体操作will_paginate / lib / will_paginate / view_helpers.rb 下面则有批注</span></span></span><br><span class="line"><span class="ruby">will_paginate @posts, <span class="symbol">:previous_label</span> =&gt; <span class="string">'上一页'</span>, <span class="symbol">:next_label</span> =&gt; <span class="string">'下一页'</span>, <span class="symbol">:container</span> =&gt; <span class="literal">false</span></span></span><br><span class="line"><span class="ruby"></span>%&gt;</span><br></pre></td></tr></table></figure></p>
<p>##关于css</p>
<p><a href="http://mislav.uniqpath.com/will_paginate/?page=2" target="_blank" rel="noopener">http://mislav.uniqpath.com/will_paginate/?page=2</a> 可以去着网站上下载其分页样式，之后将它放到<code>assets/stylesheets</code>下就可以了。</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class='digg_pagination'&gt;</span><br><span class="line">&lt;div class='pag_info'&gt;</span><br><span class="line">&lt;%=<span class="ruby"> page_entries_info @posts </span>%&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;%=<span class="ruby"> will_paginate @posts <span class="symbol">:previous_label</span> =&gt; <span class="string">'上一页'</span>, <span class="symbol">:next_label</span> =&gt; <span class="string">'下一页'</span>,<span class="symbol">:container</span> =&gt; <span class="literal">false</span> </span>%&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>-eof-</p>

          
        
      </div>
      <footer>
        
          <div class="alignright">
            <a href="/2013/11/29/2013-11-29-about-pagination-on-rails/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>




  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <!-- <div class="icon"></div> -->
            
    
      <h1 class="metro-title transition"><a href="/2013/09/18/2013-09-18-const/">custom library and define constant at rails 4</a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2013-09-18T11:57:00.000Z">2013-09-18</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Hi Yen Wong</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </li></ul>
        </header>
      
      <div class="entry">
        
          
            <p>#如何设置在rails设置常量</p>
<p>##initializer目录<br>这个是一个初始化目录，里面的所有脚本顾名思义都是在rails初始化执行的。因此在里面创建的所有文件也都将被执行。</p>
<figure class="highlight ruby"><figcaption><span>创建config.rb</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">raw_config=File.read(<span class="string">"<span class="subst">#&#123;Rail.root&#125;</span>/config/config.yml"</span>)<span class="comment">#设置yml的文件名和路径</span></span><br><span class="line">erb_result=ERB.new(raw_config).result</span><br><span class="line">APP_CONFIG=YAML.load(erb_result)[Rails.env]＃指定了如何调用常量</span><br></pre></td></tr></table></figure>
<p>设置config.yml<br><figure class="highlight yaml"><figcaption><span>config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">defaults:</span> <span class="meta">&amp;defaults</span></span><br><span class="line"><span class="attr">   redis_server:</span> <span class="string">'127.0.0.1'</span></span><br><span class="line"><span class="attr">   redis_port:</span> <span class="string">'6379'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">development:</span></span><br><span class="line">   <span class="string">&lt;&lt;:</span> <span class="string">*</span> <span class="string">defaults</span></span><br><span class="line"></span><br><span class="line"><span class="attr">production:</span></span><br><span class="line">   <span class="string">&lt;&lt;:</span> <span class="meta">*defaults</span></span><br></pre></td></tr></table></figure></p>
<p>#创建自己的library<br>其实要在rails下创建自己的library很简单，只需要在<code>/lib/</code> 直接进行添加你创建的ruby文件，那如何引用呢？其实也很简单，只需要在自己的contoller下使用<code>require filename.rb</code>就可以了</p>

          
        
      </div>
      <footer>
        
          <div class="alignright">
            <a href="/2013/09/18/2013-09-18-const/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>




  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <!-- <div class="icon"></div> -->
            
    
      <h1 class="metro-title transition"><a href="/2013/08/11/2013-08-11-rails-post/">rails中post</a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2013-08-11T14:15:00.000Z">2013-08-11</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Hi Yen Wong</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </li></ul>
        </header>
      
      <div class="entry">
        
          
            <p>#Form Helper basic#<br>view中设置其表单，其中<code>form_tag</code>定义提交给谁和用什么方法<br><figure class="highlight ruby"><figcaption><span>Form表单提交给helo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%= form_tag(<span class="string">"helo"</span>,<span class="symbol">method:</span> <span class="string">'post'</span>) <span class="keyword">do</span> %&gt;</span><br><span class="line">&lt;%= label_tag(<span class="symbol">:search</span>, <span class="string">"search for:"</span>) %&gt;</span><br><span class="line">&lt;%= text_field_tag(<span class="symbol">:search</span>) %&gt;</span><br><span class="line">&lt;%= submit_tag(<span class="string">"Search"</span>) %&gt;</span><br><span class="line">&lt;% <span class="keyword">end</span> %&gt;</span><br></pre></td></tr></table></figure></p>
<p>#Controller 如何实现接受#</p>
<p>在接收的方法中使用<code>params[:search]</code><br><figure class="highlight ruby"><figcaption><span>Controller中抓去post值</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">helo</span></span></span><br><span class="line">@helo=params[<span class="symbol">:search</span>]</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>
<p>#route将取决安排程序路径使用什么方法传递#</p>
<figure class="highlight ruby"><figcaption><span>route.rb</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">namespace <span class="symbol">:admin</span> <span class="keyword">do</span></span><br><span class="line">  post <span class="string">'tasks/helo'</span> <span class="comment">#使用post方式请求</span></span><br><span class="line">  get <span class="string">'tasks/say'</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

          
        
      </div>
      <footer>
        
          <div class="alignright">
            <a href="/2013/08/11/2013-08-11-rails-post/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>




  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <!-- <div class="icon"></div> -->
            
    
      <h1 class="metro-title transition"><a href="/2013/07/15/2013-07-15-model-for-rails-2/">Model-for-rails(2)</a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2013-07-15T07:08:00.000Z">2013-07-15</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Hi Yen Wong</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </li></ul>
        </header>
      
      <div class="entry">
        
          
            <p>#Migeration#<br>Migeration是一种可以随时改变数据模式的一种途径。通过使用Ruby DSL,从而摆脱了SQL的编写，从而使得数据库独立。Migeration保存着你历史数据结构，ActiveRecord会通过更新<code>db/schema.rb</code>来同步更新你的数据库结构。</p>
<p>##创建一个标准的Migration##<br>使用<code>rails g migration MIGRATION_NAME</code>用来创建一个标准的空migration.</p>
<ul>
<li>如果你的migration名字是’AddXXXToyyy’或是’RemoveXXXToYYY’,那么migration会自动在文档里创建<code>add_column</code>或是<code>remove_column</code></li>
<li>如果你的migration名字是’CreateXXX’那么他将自动在文档里创建<code>create_table XXX</code></li>
</ul>
<p>同样如果你的名字是AddXXXRefToYYY,就会自动添加<code>add_reference :xxx, :yyy, index:true</code></p>
<p>如果CreateJoinTableNNNN XXX YYY,则会自动添加<code>create_join_table :xxx,:yyy</code>,实际上，他会生成一张表讲带有xxx_id和yyy_id.</p>
<p>另外可以通过<code>{}</code>来限制起最大值和多态性比如<code>$ rails generate migration AddDetailsToProducts price:decimal{5,2} supplier:references{polymorphic}</code></p>
<p>##使用change方法 ##<br>以下方法支持change</p>
<ul>
<li>add_column</li>
<li>add_index</li>
<li>add_reference</li>
<li>add_timestamps</li>
<li>create_table</li>
<li>create_join_table</li>
<li>drop_table (must supply a block)</li>
<li>drop_join_table (must supply a block)</li>
<li>remove_timestamps</li>
<li>rename_column</li>
<li>rename_index</li>
<li>remove_reference</li>
<li>rename_table</li>
</ul>
<p>##回滚migrations##<br>每个生成的migration都会根据时间自动生成版本号标签，你可以通过<code>rake db:migrate VERSION=20080906120000</code> 来回到所要的版本号，如果你只是要回滚到最后一个版本，则可以<code>rake db:rollback</code>,或是在最后第三个版本，则可以<code>rake db:rollback STEP=3</code></p>
<p>##REST DB##<br>REST数据其实很简单，只要执行<code>rake db:rest</code>就可以了</p>

          
        
      </div>
      <footer>
        
          <div class="alignright">
            <a href="/2013/07/15/2013-07-15-model-for-rails-2/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>




  <article class="post">
  
  
    <div class="post-content-index">
  
      
        <header>
          <!-- <div class="icon"></div> -->
            
    
      <h1 class="metro-title transition"><a href="/2013/07/15/2013-07-15-model-for-rails-1/">model for rails(1)</a></h1>
    
  
          <ul>
            <li>
              <span class="heading-span">Posted on: </span>
              <time datetime="2013-07-15T06:20:00.000Z">2013-07-15</time>
            </li>
            
              <li>
                <span class="heading-span">By: </span>

                
                  <a href="/">Hi Yen Wong</a>
                

              </li>
            
            <li>
              <span class="heading-span">With: </span>
              
          </li></ul>
        </header>
      
      <div class="entry">
        
          
            <p>#ActiveRecord Models#</p>
<p>我们可以通过<code>rails g</code>的命令来创建一个Model<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rails g model User name:string email:string</span><br></pre></td></tr></table></figure></p>
<p>在<code>/app/models/</code>和<code>/app/db/migration</code>中会创建相应的文件</p>
<p>##Active Record Basic##<br>Active Record是一个ORM的框架</p>
<p>###命名规范###<br>Model/Class|Table/Schema<br>———–|————<br>Post       |posts<br>LineItem   |line_items<br>Deer       |deer<br>Mouse      |mice<br>Person     |people</p>
<p>###支持的数据类型####</p>
<ul>
<li>:binary</li>
<li>:boolean</li>
<li>:date</li>
<li>:datetime</li>
<li>:decimal</li>
<li>:float</li>
<li>:integer</li>
<li>:primary_key</li>
<li>:string</li>
<li>:text</li>
<li>:time</li>
<li>:timestamp</li>
</ul>
<p>###Schema 模式###<br>外键 Foreign Keys: tablename_id<br>主键 Primary Keys: 默认为id</p>
<p>另外还会自动创建两个字段 <code>created_at</code> 和<code>updated_at</code></p>
<p>###create or overriding name conventions ###<br>通常我们继承了一个ActiveRecord的类就好比创建了一张表。<br><figure class="highlight ruby"><figcaption><span>Product</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span> &lt; ActiveRecord:<span class="title">Base</span></span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>
<p>类名通常就是这个表的表名，但其实我们可以重新定义。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">changeProduct &lt; <span class="symbol">ActiveRecord:</span>Base</span><br><span class="line">     <span class="keyword">self</span>.table_name = <span class="string">"Product"</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>手动添加primary_key<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_primary_key <span class="string">"product_id"</span></span><br></pre></td></tr></table></figure></p>
<p>###about CRUD###</p>
<p>####create####<br>Active Record 对象是用hash来呈现的，使用create方法，将数据保存在数据库中<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user=User.create(<span class="symbol">name:</span> <span class="string">"Dexter"</span>, <span class="symbol">location:</span> <span class="string">"mars"</span>)</span><br></pre></td></tr></table></figure></p>
<p>而如果使用new方法，则只是实例化，并不保存数据,如果你要保存数据，则是<code>user.save</code></p>
<p>####read#####<br>更多的关于read的api，可访问<a href="http://api.rubyonrails.org/classes/ActiveRecord/Base.html" target="_blank" rel="noopener">http://api.rubyonrails.org/classes/ActiveRecord/Base.html</a><br>下面一些简单的关于read的例子<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">users=User.all <span class="comment">#返回所有的用户信息</span></span><br><span class="line">user=User.first <span class="comment">#返回第一条记录</span></span><br><span class="line">david=User.find_by_name(<span class="string">'David'</span>) <span class="comment">#返回第一条叫David的记录</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#按照条件和时间排序搜索</span></span><br><span class="line">users = User.where(<span class="symbol">name:</span> <span class="string">'David'</span>, <span class="symbol">occupation:</span> <span class="string">'Code Artist'</span>).order(<span class="string">'created_at DESC'</span>)</span><br></pre></td></tr></table></figure></p>
<p>####update####<br>基本和create性质一样<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user=User.find_by<span class="number">_</span>[KEY_NAME](<span class="string">'davis'</span>) <span class="comment">#KEYNAME所查询的字段名称</span></span><br><span class="line">user.update(<span class="symbol">KEYNAME:</span> <span class="string">'dav'</span>) <span class="comment">#更新keyname里的值</span></span><br></pre></td></tr></table></figure></p>
<p>若你要更新所有的值，那update_all会很有用</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User.update_all <span class="string">"max_login_attempts = 3, must_change_password = 'true'"</span></span><br></pre></td></tr></table></figure>
<p>####delete####<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user = User.find_by_name(<span class="string">'David'</span>)</span><br><span class="line">user.destroy</span><br></pre></td></tr></table></figure></p>

          
        
      </div>
      <footer>
        
          <div class="alignright">
            <a href="/2013/07/15/2013-07-15-model-for-rails-1/#more" class="more-link">Continue Reading<i class="fa fa-long-arrow-right fa-1"></i></a>
          </div>
        
        <div class="clearfix"></div>
      </footer>
    </div>
</article>





<nav id="pagination">
  
  
    <a href="/page/2/" class="alignright next">Next</a>
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright"><div class="padding">
	
	  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:hiyenwong.github.io">
  </form>
</div>
	
	  
<div class="widget recent-post">
  <h3 class="title">Recent Posts</h3>
  <ul class="entry">
    
      <li>
        <a href="/2019/06/05/pg-dwf/">pg 外链pg</a>
      </li>
    
      <li>
        <a href="/2019/06/03/jupyterhub/">jupyterhub 安装和配置</a>
      </li>
    
      <li>
        <a href="/2019/05/25/gradle-new-project/">gradle项目创建</a>
      </li>
    
      <li>
        <a href="/2014/12/04/redis/">redis at rails </a>
      </li>
    
      <li>
        <a href="/2014/03/20/2014-03-20-pow-for-mac/">pow for mac</a>
      </li>
    
  </ul>
</div>

	
	  
<div class="widget category">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/linux/redhat/RHCE/">RHCE</a><small>1</small></li>
  
    <li><a href="/categories/TDD/Rails/">Rails</a><small>1</small></li>
  
    <li><a href="/categories/Rails/">Rails</a><small>3</small></li>
  
    <li><a href="/categories/TDD/">TDD</a><small>1</small></li>
  
    <li><a href="/categories/constant/">constant</a><small>1</small></li>
  
    <li><a href="/categories/rails/ruby/post/mvc/controller/">controller</a><small>1</small></li>
  
    <li><a href="/categories/git/">git</a><small>1</small></li>
  
    <li><a href="/categories/json/jquery/javascript/">javascript</a><small>1</small></li>
  
    <li><a href="/categories/json/jquery/">jquery</a><small>1</small></li>
  
    <li><a href="/categories/json/">json</a><small>1</small></li>
  
    <li><a href="/categories/linux/">linux</a><small>1</small></li>
  
    <li><a href="/categories/vim/linux/">linux</a><small>1</small></li>
  
    <li><a href="/categories/mamp/mysql/ruby/mac/">mac</a><small>1</small></li>
  
    <li><a href="/categories/mamp/">mamp</a><small>1</small></li>
  
    <li><a href="/categories/Rails/ruby/model/migration/">migration</a><small>1</small></li>
  
    <li><a href="/categories/Rails/model/">model</a><small>1</small></li>
  
    <li><a href="/categories/Rails/ruby/model/">model</a><small>1</small></li>
  
    <li><a href="/categories/rails/ruby/post/mvc/">mvc</a><small>1</small></li>
  
    <li><a href="/categories/mamp/mysql/">mysql</a><small>1</small></li>
  
    <li><a href="/categories/rails/pagination/">pagination</a><small>1</small></li>
  
    <li><a href="/categories/php/">php</a><small>1</small></li>
  
    <li><a href="/categories/rails/ruby/post/">post</a><small>1</small></li>
  
    <li><a href="/categories/rvm/pow/">pow</a><small>1</small></li>
  
    <li><a href="/categories/redis/rails/">rails</a><small>1</small></li>
  
    <li><a href="/categories/rvm/pow/rails/">rails</a><small>1</small></li>
  
    <li><a href="/categories/rails/">rails</a><small>3</small></li>
  
    <li><a href="/categories/constant/rails/">rails</a><small>1</small></li>
  
    <li><a href="/categories/linux/redhat/">redhat</a><small>1</small></li>
  
    <li><a href="/categories/redis/">redis</a><small>1</small></li>
  
    <li><a href="/categories/TDD/Rails/test/ruby/rspc/">rspc</a><small>1</small></li>
  
    <li><a href="/categories/Rails/ruby/">ruby</a><small>2</small></li>
  
    <li><a href="/categories/Rails/model/ruby/">ruby</a><small>1</small></li>
  
    <li><a href="/categories/TDD/Rails/test/ruby/">ruby</a><small>1</small></li>
  
    <li><a href="/categories/mamp/mysql/ruby/">ruby</a><small>1</small></li>
  
    <li><a href="/categories/rails/pagination/ruby/">ruby</a><small>1</small></li>
  
    <li><a href="/categories/rails/ruby/">ruby</a><small>2</small></li>
  
    <li><a href="/categories/rvm/">rvm</a><small>1</small></li>
  
    <li><a href="/categories/TDD/Rails/test/">test</a><small>1</small></li>
  
    <li><a href="/categories/vim/">vim</a><small>1</small></li>
  
  </ul>
</div>

	
	  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  
    <a href="/tags/database/">database<small>1</small></a>
  
    <a href="/tags/gradle/">gradle<small>1</small></a>
  
    <a href="/tags/java/">java<small>1</small></a>
  
    <a href="/tags/jupyter/">jupyter<small>1</small></a>
  
    <a href="/tags/kotlin/">kotlin<small>1</small></a>
  
    <a href="/tags/ldap/">ldap<small>1</small></a>
  
    <a href="/tags/notebook/">notebook<small>1</small></a>
  
    <a href="/tags/postgresql/">postgresql<small>1</small></a>
  
    <a href="/tags/python/">python<small>1</small></a>
  
</div>

	
</div></aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="padding">
	<div class="alignleft">
	  
	  &copy; 2019 Hi Yen Wong
	  
	  Powerd by <a href="http://hexo.io/" target="_blank">hexo</a>
	  and Theme by <a href="https://github.com/halfer53/metro-light" target="_blank">metro-light</a>
	</div>

	<div class="alignright">
		
		
		
		
		
		
		
	</div>

	<div class="clearfix"></div>
</div>

<div class="scroll-top"><i class="fa fa-arrow-circle-up"></i></div></footer>
  


<link href="https://opensource.keycdn.com/fontawesome/4.6.3/font-awesome.min.css" rel="stylesheet">
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.1.min.js"></script>



<!-- <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/3.0.4/jquery.imagesloaded.js"></script> -->
<!-- <script src="/js/gallery.js"></script> -->



<script type="text/javascript">
$(window).scroll(function() {

    if($(this).scrollTop() > 400) {
        $('.scroll-top').fadeIn(200);
    } else {
        $('.scroll-top').fadeOut(200);
    }
});

$('.scroll-top').bind('click', function(e) {
    e.preventDefault();
    $('body,html').animate({scrollTop:0},200);
});
</script>


</body>
</html>
