<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Php data object</title><link rel="shortcut icon" href="/images/avatar.png"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css"><script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script></head><body><nav class="main-nav"><a href="/">Home</a><a href="/archives">Archives</a></nav><div class="profile"><section id="wrapper"><header id="header"><a href="/about"><img class="2x" id="avatar" src="/images/avatar.png"></a><h1>無名之島</h1><h2></h2></header></section></div><section class="post" id="wrapper"><article><header><h1>Php data object</h1><h2 class="headline">Jun 12, 2013 10:17·801 words
·2 minutes read<span class="tags"></span></h2></header><section id="post-body"><p>提供了一种数据库无关的机制来在php6中链接、读取和操作各种各样的RDBMS平台。开发者采取一致的方式来跨各个数据库平台操作，从而改进可一致性和可伸缩性，同时不需要非官方的第三方抽象层。</p>
<p>#PDO($dsn);Data Source Name</p>
<p>格式：<br>    protocol:key=value;key=value…</p>
<ul>
<li>key: host,username,password,port,dbname</li>
</ul>
<p>#query()</p>
<p>在PDO类里有一个简单的查询方法query(),并返回PDOStatement类型的实例化类。PDOStatement类起实现了名为Traversible的借口；这意味着它支持直接迭代。 在该类伤迭代产生一系列关联数组，每个数组等于一行输出；但每个关联数组条目同时包含key/value和index/value数据，所以需要 is_numberic() 来过滤index/value.</p>
<p>#PDOStatement类<br>永远不会直接创建PDOStatement类。</p>
<p>#prepare()</p>
<p>prepare() 方法生成了PDOStatement的实例，查询由PDOStatement保存而返回的数据比仅仅直接迭代使实例要复杂。 prepare() 的SQL查询字符串包含了一个未带引号的参数 :username</p>
<p>#prepare和query的差异性</p>
<ol>
<li>尽管返回一个PDOStatement的实例，但并没有执行查询。通过分离语句的准备和查询的执行，可以在执行之前进一步地查询该语句</li>
<li>使用PDOStatement的fetch()来一次性获取数据库返回的每个行数据,而不是用forearch()来迭代PDOStatement的实例.这样可以灵活地传递一个参数:一个常量PDO::FETCH_ASSOC. 这个意味着所返回的数据一个只包含的key/value的数据关联数组,没有以前的混合index/value的数组</li>
<li>可以方便地每次仅返回一行数据，如果没有其他的行返回，那么fetch()返回false.类似结构化方法fetchAll()可以一次将所有的行返回到包含多个关联数组的耽搁数组中</li>
</ol>
<p>#bindParam()<br>    bindParam(‘:username’,$strUsername,PDO::PARAM_STR)</p>
<p>仅仅获得一个变量并将其传递给PDO引擎，从而告诉PDO引擎在何处将其绑定到初始SQL语句。常量PARAM_STR告诉PDO引擎传递参数的字符串。因为应用必要的引号以构造最终的参数是字符串。因为应用必要的引号以构造最终的SQL语句是PDO和RDBMS的责任.</p>
<p>#bindValue()与bindParam()</p>
<p>bindValue() 不会接受一个PHP变量为参数;相反，它需要硬编码的值作为参数.同样，如果试图将一个硬编码的值传递给bingParam，该方法将失败，它需要一个通过引用传递的变量.<br>优点：</p>
<ol>
<li>抽象性</li>
<li>安全性 不易SQL注入攻击。 将HTTP_POST和GET参数以转义SQL中具有特殊意义的所有字符。 使用一些不常用的非ASCII字符集时容易出错</li>
<li>可移植性 使用参数化的预置豫剧可以一次性解决这个问题。</li>
<li>性能 通过使用单条预置语句，底层的数据库能够知道应用程序中某个流行查询在结构上自始至终保持不变</li>
</ol>
<p>#PDOStatement的事务与提交</p>
<p>默认情况下，PDO假设到数据库的写操作应该是自动提交的。</p>
</section><nav id="post-nav"><span class="prev"><a href="/2013/06/12/2013-06-12-jso/"><span class="arrow">←</span>Newer Posts</a></span><span class="next"></span></nav></article></section><footer id="footer"><div id="social"><a class="symbol" href="https://github.com/fuzhouxxdong"><i class="fa fa-github"></i></a></div><p class="small">© Copyright 2018 &nbsp;<i class="fa fa-heart" aria-hidden="true">&nbsp;Dxx</i></p><p class="small">Powered by &nbsp;<a href="https://hexo.io/">Hexo &nbsp;</a>Theme By &nbsp;<a href="https://github.com/fuzhouxxdong/hexo-theme-dxx">Dxx</a></p></footer><script>hljs.initHighlightingOnLoad();</script></body></html>